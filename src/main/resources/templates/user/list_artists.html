<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
<head th:replace="~{layout/main :: head('Khám phá Nghệ sĩ')}"></head>
<body>

<header th:replace="~{layout/main :: header}"></header>

<div class="container">
  <h1>Khám phá Nghệ sĩ</h1>

  <form th:action="@{/explore/artists}" method="get" class="mb-3">
    <div class="input-group">
      <input type="text" class="form-control" name="keyword" th:value="${keyword}" placeholder="Tìm kiếm theo tên nghệ sĩ...">
      <button class="btn btn-primary" type="submit">Tìm</button>
      <a th:href="@{/explore/artists}" class="btn btn-secondary">Xóa</a>
    </div>
  </form>

  <div th:if="${artistPage == null or artistPage.isEmpty()}" class="alert alert-info">
    Không tìm thấy nghệ sĩ nào phù hợp.
  </div>

  <table th:if="${artistPage != null and !artistPage.isEmpty()}">
    <thead>
    <tr>
      <th>Ảnh đại diện</th>
      <th>Tên Nghệ sĩ</th>
      <th>Hành động</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="artist : ${artistPage.content}">
      <td>
        <img th:if="${artist.avatarPath != null and artist.avatarPath != ''}"
             th:src="@{/artists/photo/{filename}(filename=${artist.avatarPath})}"
             alt="Avatar"
             style="width: 60px; height: 60px; object-fit: cover; border-radius: 50%;">
        <span th:if="${artist.avatarPath == null or artist.avatarPath == ''}"
              style="font-style: italic; color: #888;">N/A</span>
      </td>
      <td th:text="${artist.name}"></td>
      <td>
        <button type="button" class="btn btn-sm btn-info"
                data-bs-toggle="modal"
                data-bs-target="#artistDetailModal"
                th:data-artist-id="${artist.id}"
                th:data-artist-name="${artist.name}"
                th:data-artist-bio="${artist.bio}"
                th:data-artist-avatar-path="${artist.avatarPath}">
          Chi tiết
        </button>
      </td>
    </tr>
    </tbody>
  </table>

  <div th:if="${artistPage.totalPages > 0}" class="pagination" style="margin-top: 20px;">
  </div>
</div>

<div class="modal fade" id="artistDetailModal" tabindex="-1" aria-labelledby="artistDetailModalLabel" aria-hidden="true">
</div>

<footer th:replace="~{layout/main :: footer}"></footer>

<script th:inline="javascript">
  /*<![CDATA[*/
  const contextPath = /*[[@{/}]]*/ '/';
  // ... (Toàn bộ code JS cho Modal) ...
  /*]]>*/
</script>

</body>
</html>
