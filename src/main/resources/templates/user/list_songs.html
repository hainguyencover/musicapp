<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
<head th:replace="~{layout/main :: head('Khám phá Bài hát')}"></head>
<body>

<header th:replace="~{layout/main :: header}"></header>

<div class="container">
    <h1>Khám phá Bài hát</h1>

    <form th:action="@{/explore/songs}" method="get" class="mb-3">
        <div class="input-group">
            <input type="text" class="form-control" name="keyword" th:value="${keyword}" placeholder="Tìm kiếm theo tên bài hát...">
            <button class="btn btn-primary" type="submit">Tìm</button>
            <a th:href="@{/explore/songs}" class="btn btn-secondary">Xóa</a>
        </div>
    </form>

    <div th:if="${songPage == null or songPage.isEmpty()}" class="alert alert-info">
        Không tìm thấy bài hát nào phù hợp.
    </div>

    <div class="song-list-container" th:if="${songPage != null and !songPage.isEmpty()}">
        <div class="song-card" th:each="song : ${songPage.content}">
            <div class="song-card-info">
                <span class="song-card-title" th:text="${song.name}">Tên Bài hát</span>
                <span class="song-card-artist" th:text="${song.artist?.name}">Tên Nghệ sĩ</span>
            </div>

            <div class="song-card-actions" style="display: flex; align-items: center; gap: 1rem;">
                <button class="like-btn" th:data-song-id="${song.id}" title="Yêu thích">
                    <svg class="icon-heart" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>
                </button>
                <a th:href="@{/play/{id}(id=${song.id})}" class="song-card-play-btn" title="Phát nhạc">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"></path></svg>
                </a>
            </div>
        </div>
    </div> <div th:if="${songPage.totalPages > 0}" class="pagination" style="margin-top: 20px;">
    <span th:text="|Trang ${songPage.number + 1} / ${songPage.totalPages}|"></span>
    <nav aria-label="Page navigation">
        <ul class="pagination">
            <li class="page-item" th:classappend="${songPage.first} ? 'disabled'">
                <a class="page-link"
                   th:href="@{/explore/songs(size=${songPage.size}, page=0, sort=${param.sort}, keyword=${keyword})}">&laquo; Đầu</a>
            </li>
            <li class="page-item" th:classappend="${songPage.last} ? 'disabled'">
                <a class="page-link"
                   th:href="@{/explore/songs(size=${songPage.size}, page=${songPage.totalPages - 1}, sort=${param.sort}, keyword=${keyword})}">Cuối &raquo;</a>
            </li>
        </ul>
    </nav>
</div>
</div>

<footer th:replace="~{layout/main :: footer}"></footer>
</body>
</html>
